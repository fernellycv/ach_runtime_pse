<style>
    /*.select2-container .select2-search__field {
	    width: 100% !important;
	}*/

    .info-row {
        padding: 0.938rem 0;
        background: #e8e9eb;
        margin-bottom: 0.625rem;
        box-shadow: 0.188rem 0.188rem 0.125rem lightgrey;
        border-left: 0.25rem solid #2d4063;
    }

    .field-info {
        padding: 0.313rem 0rem;
    }

    .dropdowncustm {
        transform: translate3d(0.313rem, 2.188rem, 0rem) !important;
    }

    .searchContainer {
        background-color: #e7e9eb;
        height: auto;
    }

    /* .input-group .form-control{
          //  z-index: 0 !important;
    } */

    .iconSearch {
        cursor: pointer;
        background-color: #fff;
        border: none;
    }

    .width100 {
        width: 100%;
    }

    .btnSavedAlighn {
        margin: 0;
        margin-top: 0.313rem;
        margin-bottom: 0.313rem;
    }

    .btnSavedData {
        margin-left: 0.625rem;
        display: inline-block;
        margin-top: 0.188rem;
    }

    .btnSavedCancel {
        border: 0.063rem solid #DE2F2B;
        background-color: #D05450;
        border-radius: 0.625rem;
        color: #F5E6E6;
        font-size: 0.813rem;
    }

    .btnAdvsearch {
        width: 100%;
        padding-left: 0.188rem;
    }

    .btnAdvshowhide {
        color: #fff !important;
    }

    .btnAdvCircle {
        padding-top: 0.125rem;
    }

    .modalAlertbox {
        top: 12.5rem;
    }

    .modalAlertalighn {
        padding: 0rem !important;
        border: 0rem !important
    }

    .modalWidth {
        width: 37.5rem;
    }

    .modalSavedsearch {
        line-height: 0.5 !important;
    }

    .modalSearchname {
        padding: 0.625rem;
        margin: 0
    }

    .asterisk {
        color: #e02222;
        font-size: 0.75rem;
        padding-left: 0.125rem
    }

    .modalRequired {
        color: red;
        margin-left: 0.625rem;
    }

    .modalBtnalighn {
        float: right;
        padding: 0.625rem;
        margin: 0
    }

    .clearBoth {
        clear: both
    }

    .btnAdvBody {
        margin: 0;
        margin-bottom: 0.5rem;
        padding: 1.25rem;
    }

    .btnAdvsearchAlighn {
        padding: 0.625rem 0.25rem 0.625rem 0.25rem;
        margin-bottom: 1.25rem;
    }

    .btnAdvFont {
        font-size: 1.375rem;
    }

    .btnAddRemove {
        min-width: 13.563rem !important;
    }

    .btnAddRemoveBody {
        margin: 0;
        margin-top: 0.313rem;
        margin-right: 0.313rem;
    }

    .addRemoveLabel {
        display: inline-block;
        margin-top: 0.188rem;
    }

    .addremoveSwitch {
        width: 2.125rem !important;
        height: 0.875rem !important;
        border-radius: 1.25rem !important;
        margin-top: 0.313rem;
    }

    .addremoveSmall {
        width: 0.75rem !important;
        height: 0.75rem !important;
    }

    .addremoveOpacity {
        opacity: 0;
        display: none;
    }

    .advBtnalighn {
        margin-right: 0.313rem;
    }

    .dateTo {
        border: none;
        background-color: transparent;
    }

    .textStart {
        text-align: start;
    }

    .advBtnsearch {
        margin-right: 0.938rem;
    }

    .advBtnborder {
        border-color: #ccc;
    }

    .countbarAlighn {
        padding: 0.313rem;
        background: #fff;
    }

    .countbarDisp {
        margin-bottom: 0.625rem;
        width: 100%;
    }

    .countbarBtn {
        float: right;
        box-sizing: border-box;
    }

    .listBtn {
        border: 0.063rem solid #fff;
        box-sizing: border-box;
        border-right: 0rem;
        margin-left: 0.313rem
    }

    .gridBtn {
        border: 0.063rem solid #fff;
        box-sizing: border-box;
        border-left: 0rem
    }

    .dwnBtnalighn {
        border: 0.063rem solid #fff;
        box-sizing: border-box;
    }

    .dwnIndex {
        z-index: 10000;
    }

    .excelIcon {
        margin-left: 2.5rem !important;
    }

    .refreshIcon {
        float: right;
        border: 0.063rem solid #fff;
        box-sizing: border-box;
        margin-left: 0.313rem;
    }

    .btnAll {
        float: right;
        box-sizing: border-box;
        margin-left: 0.625rem;
    }

    .btnAllalighn {
        float: right;
        border: 0.063rem solid #fff;
        box-sizing: border-box;
        margin-left: 0.625rem;
    }

    .btnAllfont {
        font-size: 0.938rem;
    }

    .btnAlldrop {
        font-size: 0.813rem !important
    }

    .btnAllpointer {
        pointer-events: none
    }

    .btnAllCstm {
        text-align: center;
        color: #000;
    }

    .modalCstm {
        padding: 0.938rem;
    }

    .searchCriteria {
        margin: 0;
        word-wrap: break-word;
    }

    .dsearchAlighn {
        font-size: 0.813rem;
        word-wrap: break-word;
    }

    .btnWrapper {
        vertical-align: middle;
    }

    .wrapperDisp {
        display: block;
        float: right;
    }

    .noRecord {
        margin: 0;
        text-align: center;
    }

    .cursorPoint {
        cursor: pointer
    }

    .iconDownload {
        text-decoration: underline;
    }

    .acitiondisp {
        padding: 0.25rem;
    }

    .dwndisp {
        padding: 0 0.813rem;
    }

    .listviewAlighn {
        margin: 0rem;
        overflow-x: auto !important;
        margin-bottom: 1.25rem;
        max-height: 32.813rem !important;
    }

    .active1 {
        /* background:#CAD5EB; */
        /* background:   rgba(54, 89, 154, 0.75) !important; */
        background: #bdbdbd !important;
        border: 1px solid;
    }
</style>
<div class="page-bar breadCrumb" ng-controller="activeController">
    <div class="row">
        <div class="col-md-6 ">
            <ul class="page-breadcrumb">
                <li>
                    <i class="fa fa-refresh"></i>
                    <a href="javascript:void(0);" translate class="removeCursor">Sidebar.CyclesModule</a>
                    <i class="fa fa-angle-right"></i>
                </li>
                <li class="cursorPointer">
                    <span class="removeCursor" translate>Sidebar.ClosingCycle</span>
                </li>
            </ul>
        </div>

        <div class="col-md-6 headerVals">
            <div data-ng-include="'templates/header/VPheader.html'" data-ng-controller="headerCtrl"></div>
        </div>
    </div>
</div>

<div>
    <div class="contentContainer mb-2">
        <div class="pageTitle alertWidthonResize">
            <div class="row">
                <div class="col-sm-12">
                    <div class="title__container">
                        <h2 translate>CyclesModule.PageTitle</h2>
                    </div>
                </div>
            </div>
        </div>

        <div class="animated bounce autoAdjustAlert bold"
            ng-class="{'alert alert-success': alert.type == 'success','alert alert-danger':alert.type == 'danger'}"
            ng-repeat="alert in alerts" ng-if="alert.msg != 'Payment not found'">
            <a class="close" data-dismiss="alert" aria-label="close">&times;</a> {{alert.msg}}
        </div>

        <div class="searchholder">
            <div class="row">
                <div class="col-md-12">
                    <form class="form-inline" ng-submit="FilterByDate(ProcessDate)">
                        <div class="form-group mb-2">

                            <label class="bold" translate>CyclesModule.Date</label>&nbsp;&nbsp;
                            <div class="input-group-prepend date" data-date-format="yyyy-mm-dd"
                                data-date-viewmode="years" data-date-minviewmode="months">
                                <input type="text" class="form-control DatePicker dateTypeKey width100"
                                    ng-model="ProcessDate" id="CstartDate"
                                    placeholder="{{'Placeholder.format' | translate}}" ng-blur="removeFn()"
                                    onpaste="return false" required>
                                <span class="input-group-text"><span class="fa fa-calendar"></span></span>
                            </div>
                        </div>
                        <div class="modalCstm">
                            <button type="submit" id="okBtn" class="btnSuccess btnStyle"
                                translate>BtnGroup.Submit</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="modal fade" tabindex="-1" id="alertBox" role="dialog">
            <div class="modal-dialog modal-md modalAlertbox">
                <div class="modal-content modalbdy animated tada">
                    <div class="modal-header modalAlertalighn">
                        <div class="iconBox"><i class="exclaLine"></i><i class="exclaDot"></i></div>
                    </div>
                    <div class="modal-body modalAlertalighn">
                        <h1 translate>BankDataDts.Areyousure</h1>
                        <h4 translate>BankDataDts.PopupRecoverMsg</h4>
                    </div>
                    <div class="modal-footer modalftr">
                        <button tabindex="0" type="button" class="buton cancl" data-dismiss="modal"
                            translate>BtnGroup.Cancel</button>
                        <button tabindex="0" type="button" class="buton yess" ng-click="deleteSelectedSearch($event)"
                            translate>BankDataDts.Confirm</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="myModal" class="modal fade" role="dialog" tabindex="-1" data-backdrop="static" data-keyboard="false">
            <div class="modal-dialog">
                <div class="modal-content modalWidth">
                    <div class="modal-header modalHeaderColor">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form ng-submit="triggerCondition(datas)">
                            <div class="form-group modalSearchname">
                                <h5 translate>CyclesModule.warningmessage</h5>
                            </div>

                            <div class="form-group modalBtnalighn">
                                <button type="button" class="btnDeny btnStyle btn-sm" data-dismiss="modal"
                                    translate>BankDataDts.No</button>
                                <button type="submit" class="btnSuccess btnStyle btn-sm"
                                    translate>BankDataDts.Yes</button>
                            </div>
                            <div class="clearBoth"></div>
                        </form>
                    </div>
                </div>

            </div>
        </div>

        <div id="dialog">
            <div class="modal fade" id="myModals" role="dialog" tabindex="-1" data-backdrop="static"
                ng-keydown="dummy($event)">
                <div class="modal-dialog">
                    <div class="modal-content modalwidth">
                        <div class="modal-header modalHeaderColor">
                            <button type="button" class="close" data-dismiss="modal"
                                ng-click="filterCancel()">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="col-md-12 btnPaddng" style="text-align: center;">
                                <h5 style="white-space: pre-wrap">{{errormsg}}</h5>
                            </div>
                            <div class="col-md-12 txtCenter btnPaddng">
                                <button type="button" class="btnSuccess btn-secondary" ng-click="refresh(false)"
                                    data-dismiss="modal" translate>CyclesModule.Accept</button>
                            </div>
                            <div class="clearBoth"></div>
                        </div>
                    </div>

                </div>
            </div>
            <!-- <div class="modal" id="myModals">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                         
                            <button type="button" class="close" data-dismiss="modal">
                                <span>&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <h5>{{errormsg}}</h5>
                        </div>
                        <div class="modal-footer">
                          
                            <button type="button" class="btn btn-secondary" ng-click="refresh(false)" data-dismiss="modal" translate>CyclesModule.Accept</button>
                        </div>
                    </div>
                </div>
            </div>  -->
        </div>

        <div class="countbarAlighn">
            <div class="tobeFixed">
                <div class="row m-0">
                    <div class="countbar-title row m-0 countbarDisp">
                        <div class="col-md-8 col-sm-4 col-xs-4 ng-binding caption">
                            <span class="highlight">{{datas.length}} &nbsp;</span>
                            <span>{{'BankDataDts.recordsshown' | translate}}</span>
                        </div>

                        <div class="col-md-4 col-sm-8 col-xs-8 p-0">
                            <div class="btn-group countbarBtn">
                                <button class="btn-trans gridBtn" id="btn_2"
                                    ng-class="!changeViewFlag?'disabledBtnColor':'cmmonBtnColors'"
                                    ng-click="changeViewFlag = !changeViewFlag" data-toggle-second="tooltip"
                                    data-placement="top" data-original-title="{{'ToolTips.GridView' | translate}}"><i
                                        class="fa fa-table fa-fs14"></i></button>
                            </div>
                            <div class="btn-group refreshIcon" data-toggle-second="tooltip" data-placement="top"
                                data-original-title="{{'ToolTips.Refresh' |translate}}">
                                <button class="btn-trans" ng-click="refresh(false)"><i class="fa fa-refresh fa-fs14"></i></button>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>
            </div>

            <div class="alert alert-warning mt-2" ng-show="!datas.length">
                <strong>
                    <h5 class="noRecord"><i class="fa fa-warning"></i> {{'BankDataDts.NoRecordsFound'|translate}}</h5>
                </strong>
            </div>

            <div class="listView FixHead dataGroupsScroll mt-2 listviewAlighn" ng-show="!changeViewFlag">
                <table class="table table-bordered" id="cntrlID" ng-show="datas.length">
                    <thead>
                        <tr>
                            <th ng-repeat="val in sortMenu"
                                ng-if="val.visible && (val.fieldName == 'Action' ? newPermission.CloseCycle : true)"
                                ng-style="(val.fieldName == 'Action')?{'text-align':'center'} : '' " translate>
                                {{val.label}}

                                <span id="{{val.fieldName}}_Icon" class=""></span>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="cursorPointer" ng-class="{active1:$index==selectedRow}"
                            data-ng-click="rowHighilited($index)" ng-repeat="data in datas">
                            <td ng-repeat="val in sortMenu"
                                ng-if="val.visible && val.fieldName !='Select' && (val.fieldName == 'Action' ? newPermission.CloseCycle : true)"
                                ng-click="(val.fieldName != 'Action' &&val.fieldName !='Select')?detail(data,$event):''">
                                <span
                                    ng-if="val.fieldName == 'StartTime' || val.fieldName == 'EndTime' || val.fieldName == 'CreatedDateTime' ">
                                    {{data[val.fieldName] | dateFormat}} </span>
                                <span
                                    ng-if="(val.fieldName != 'Auditlog') && (val.fieldName != 'StartTime')&& (val.fieldName != 'EndTime')&& (val.fieldName != 'CreatedDateTime')">
                                    {{data[val.fieldName]}} </span>
                                <button class="btnSuccess btn-sm float-right"
                                    ng-if="val.fieldName == 'Action'&&data['Status']=='OPEN'" data-toggle="modal"
                                    data-target="#myModal" style="margin-top:5px;display:inline-block;margin-right:6px;"
                                    ng-click="forceActionpopup(data)" translate>BtnGroup.Close</button>
                            </td>
                        </tr>
                    </tbody>
                </table>

            </div>
            <div class="clearBoth"></div>
        </div>

        <div class="tobeFixed">
            <div ng-show="datasaudit.length" class="mt-2" style="text-align: center;">
                <strong>
                    <h5 translate> CyclesModule.AuditLogs</h5>
                </strong>
            </div>

            <div class="listView FixHead dataGroupsScroll mt-2 listviewAlighn" ng-show="!changeViewFlag">
                <table class="table table-striped table-bordered table-hover" ng-show="datasaudit.length">
                    <thead>
                        <tr>
                            <th ng-repeat="val in sortMenuaudit" ng-if="val.visible"
                                ng-style="(val.fieldName == 'Action')?{'text-align':'center'} : '' " translate>
                                {{val.label}}

                                <span id="{{val.fieldName}}_Icon" class=""></span>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="data in datasaudit">
                            <td ng-repeat="val in sortMenuaudit">
                                <span
                                    ng-if="(val.fieldName != 'Auditlog') && (val.fieldName != 'StartTime')&& (val.fieldName != 'EndTime')&& (val.fieldName != 'CreatedDateTime')">
                                    {{data[val.fieldName]}}</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        var showFlag = false;
        // customDateRangePicker('CstartDate', 'CendDate')
        // customDateRangePicker("GeneratedDateStart", "GeneratedDateEnd")
        //customDateRangePicker

        $('.input-group-text').on('click focus', function (e) {
            $(this).prev().focus().click()
        })

        setTimeout(function () {
            $('[data-toggle-second=tooltip]').tooltip({ trigger: "hover" });
        }, 1000)

        $('li.dropdown.mega-dropdown a').on('click', function (event) {
            $(this).parent().addClass("open");
        });

        $('li.dropdown.mega-dropdown1 a').on('click', function (event) {
            $(this).parent().toggleClass("open");
        });

        $('li.dropdown.mega-dropdown a').focus(function (event) {
            $(this).parent().addClass("open");
        });

        $('body').click(function (e) {

            // if ($(e.target).attr('id') == 'DropId') {
            //     if (!showFlag) {
            //         $('.customDropDown1').show()
            //     } else {
            //         $('.customDropDown1').hide()
            //     }
            // } else {
            //     if ($(e.target).parent().hasClass('cancel')) {
            //         $('.customDropDown1').show()
            //     } else {
            //         $('.customDropDown1').hide()
            //     }
            // }

            if (!$('li.dropdown.mega-dropdown').is(e.target) && $('li.dropdown.mega-dropdown').has(e.target).length === 0 && $('.open').has(e.target).length === 0) {
                $('li.dropdown.mega-dropdown').removeClass('open');
            }
        });
    });
</script>
